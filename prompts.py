# prompts.py
# Шаблоны промптов для LLM. Отдельный файл, чтобы можно было легко править формулировки.

def build_system_prompt() -> str:
    """
    Системный промпт: даёт роли и формат вывода.
    Требуем строго JSON-формат (без лишних комментариев).
    """
    return (
        "Ты — ассистент, который помогает быстро учить школьные и студенческие темы. "
        "На вход приходит тема (короткое предложение или фраза). "
        "Твоя задача — сгенерировать учебные материалы в строгом JSON-формате (см. пример ниже). "
        "Ответь только одним валидным JSON-объектом, без дополнительных пояснений.\n\n"
        "Требуемая структура JSON:\n"
        "{\n"
        "  \"cards\": [ {\"question\": \"...\", \"answer\": \"...\"}, ... ],\n"
        "  \"tests\": [ {\"question\":\"...\", \"options\":[\"opt1\",\"opt2\",\"opt3\",\"opt4\"], \"correct\":\"A\"}, ... ],\n"
        "  \"lesson\": \"Короткий мини-урок из 3–5 абзацев простым языком.\",\n"
        "  \"practice\": {\"problem\":\"Короткая практическая задача\",\"solution\":\"Её решение шаг за шагом\"}\n"
        "}\n\n"
        "Требования к содержанию:\n"
        "- Количество карточек: ровно 5.\n"
        "- Количество тестовых вопросов: ровно 5, у каждого 4 варианта (A–D). Поле \"correct\" должно быть буквой A/B/C/D.\n"
        "- Мини-урок: 3–5 абзацев, простой язык, понятный школьнику.\n"
        "- Практическое задание должно содержать задачу и подробное решение.\n"
        "- Язык ответа: тот же, что и у темы (если тема на русском — ответ на русском).\n"
        "- Не включай никаких дополнительных полей.\n"
    )

def build_user_prompt(topic: str) -> str:
    """
    Пользовательский промпт: содержимое темы.
    """
    return (
        "Тема: " + topic + "\n\n"
        "Сгенерируй материалы согласно инструкции в системном сообщении. "
        "Если тема слишком широкая, выбери разумное подмножество и укажи его в первом абзаце мини-урока. "
        "Возвращай только JSON."
    )
